# Problem: Checkpoint-Restart Boundary-Conditions
# Author: Matthew Abruzzo
#
# This is an input file for testing the new-style checkpoint-restart machinery
#
# In more detail, this mostly acts like a template-file that is used by the
# testing tool. In practice, the testing tool will:
# - provide a Stopping section and an Output section.
# - use the contents of Field:list to determine which fields to compare before
#   and after a restart (for new-style checkpoint-restart, the test can be
#   configured to skip this)
# Details are provided on the website documentation about how you can see the
# full parameter files that are generated in this test.

   include "input/Checkpoint/legacy/checkpoint_boundary.in"

   Adapt {
      max_initial_level = 0;
      min_level = -1;
      max_level = 0;
   }

   # we want to check if the time-dependence of a boundary works properly.
   # it is not supported by the old-style checkpoint-restart infrastructure.
   Boundary {
      VX_inflow {
        value = 1.0 + 0.005 * t;
      }
   }

   Method {
      list = ["order_morton", "check", "ppm"];

      order_morton {
          schedule {
             list = [2, 4];
             var = "cycle";
          };
      };

      check {
          dir = [ "Check-%02d", "cycle" ];
          num_files = 2;
          ordering = "order_morton";
          include_ghosts = false; # the program encounters an error on restart
                                  # when this is true
          schedule {
             list = [2, 4];
             var = "cycle";
          };
      };

   }